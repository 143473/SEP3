@page "/AllUsers"
@using Presentation_Layer.Models
@using Presentation_Layer.Authentication
@using System.Security.Claims
@using global::Data
@attribute [Authorize(Policy = "Administrator")]
@inject NavigationManager NavigationManager

@inject IUserService userService;
@inject AuthenticationStateProvider stateProvider;


<h3>All Users</h3>
<ul>
@foreach (var user in users)
{
    <li>
        <b @onclick="@(() => MoreUserInfo(user.Username))"><a href="#">@user.Username</a></b>
    </li>
}
</ul>




@code {
    private IList<User> users  = new List<User>();

    protected override async Task OnInitializedAsync()
    {
        users = await userService.GetUsersAsync();
    }
    

    
    private async Task MoreUserInfo(string username)
    {
        NavigationManager.NavigateTo($"UserInfo/{username}");
    }
    
}